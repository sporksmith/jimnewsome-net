
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Jim Newsome</title>
  <meta name="author" content="Jim Newsome">

  
  <meta name="description" content="I got an interesting request a few months ago&mdash;to implement the telephony back-end
for a real life dancing game to be played at the
2013 Three &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.jimnewsome.net">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Jim Newsome" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Jim Newsome</a></h1>
  
    <h2>Always Be Making</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.jimnewsome.net" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/projects">Projects</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/07/06/dance-ave/">Dance Ave</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-06T14:47:00-04:00" pubdate data-updated="true">Jul 6<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I got an interesting request a few months ago&mdash;to implement the telephony back-end
for a real life dancing game to be played at the
2013 <a href="http://www.3riversartsfest.org/">Three Rivers Arts Festival</a>.</p>

<p><img src="/images/dance-ave.jpg" alt="Dance Ave" /></p>

<p><a href="http://www.cityofplay.org/traf/">Dance Ave</a>
 is a physical game where players try to reach all of several stations positioned around an area.
Players may only move between stations by dancing with passers-by.
The telephony back-end comes in at the stations, where players dial a special code
with their cell phone. Doing so gives the player credit for reaching that station, tells them
how many stations they have left to visit, and then plays the song for that station.
Players use that song to groove over to the next station.</p>

<p>I ended up implementing the back-end with the <a href="https://www.djangoproject.com/">Django</a> web framework,
and using the <a href="https://www.tropo.com/home.jsp">Tropo</a> programmable telephony service.
The more mainstream option for telephony of course would have been <a href="http://www.twilio.com/">Twilio</a>.
I ended up using Tropo because initially we were also going to make an SMS-based game,
and Tropo has cheaper rates for SMS.
Still, Tropo was fairly pleasant to use. One nice feature in particular is that until you move your app
from &ldquo;debug mode&rdquo; to &ldquo;production mode&rdquo;, all services are free. So, you can feel free
to blast the service with requests during development and testing without worrying about racking
up a big bill.</p>

<p>Unfortunately the player scores were inadvertently reset both times the game was played.
After reviewing the logs again, I found a <a href="https://github.com/sporksmith/dance_ave/issues/1">usability issue</a>
with the administrative dashboard page that was most likely the cause.
Long story short&mdash;from now on I&rsquo;ll remember to use the <a href="https://en.wikipedia.org/wiki/Post/Redirect/Get">Post-Redirect-Get</a>
pattern to avoid accidental re-<code>POST</code>s.</p>

<p>Luckily the score for Dance Ave is mostly immaterial, and folks still
<a href="https://www.facebook.com/media/set/?set=a.10151753193669892.1073741833.555979891&amp;type=1&amp;l=21b6c3dff1">had fun playing it</a>.
The code is now available <a href="https://github.com/sporksmith/dance_ave">on GitHub</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/07/04/in-repository-documentation/">In-Repository Documentation</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-07-04T11:31:00-04:00" pubdate data-updated="true">Jul 4<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Introduction</h1>

<p>Two popular places to keep documentation for programming projects are:</p>

<ol>
<li>In <code>README</code> files in the code repository.</li>
<li>In a separate wiki.</li>
</ol>


<p>In this article, I propose that a compelling way to manage
documentation is to combine the two: to write the documentation as
markdown files in the code repository itself, and to publish those
pages in a wiki-like format.</p>

<p>I also share my experience doing this on a SourceForge-hosted project,
where it is already quite straight-forward to do this, and could be
made even more convenient with only a few minor tweaks to
SourceForge&rsquo;s Allura platform.</p>

<h1>Why Markdown?</h1>

<p><a href="http://daringfireball.net/projects/markdown/">Markdown</a>, as defined
by its inventor Mark Gruber:</p>

<blockquote><p>“Markdown” is two things: (1) a plain text formatting syntax; and
(2) a software tool, written in Perl, that converts the plain text
formatting to HTML.</p></blockquote>

<p>There are other plain text formatting syntaxes and tools, but Markdown
seems to have the most momentum, perhaps because of its
natural-looking syntax. Since its inception, many tools have been
created to parse Markdown files and convert them to formats suitable
for publishing, such as <code>html</code> and <code>pdf</code>. (One of my favorites is
<a href="http://johnmacfarlane.net/pandoc/">pandoc</a>, which also adds some
useful
<a href="http://johnmacfarlane.net/pandoc/README.html#pandocs-markdown">extensions</a>).</p>

<p>There are many tools for publishing a whole site or wiki from
Markdown-generated files, and several project-hosting platforms
include support for Markdown-based wikis and for rendering
in-repository Markdown files, including SourceForge&rsquo;s Allura platform.</p>

<h1>Why In-Repository?</h1>

<p>The software engineering principle of
<a href="http://en.wikipedia.org/wiki/Don't_repeat_yourself">Don&rsquo;t Repeat Yourself</a>
applies equally well to documentation. There should be only
one canonical place for documentation. Having documentation in two
places (such as in a wiki and in in-repository README files) will tend
to result in them getting out of sync, and more than likely one of
those will rot.</p>

<p>Given that the canonical source of the documentation should only be in
one place, in the code repository itself seems ideal.</p>

<ul>
<li>Keeping them somewhere other than the code repository implies no
documentation in the repository other than a URL to that other
location. That leaves a user with a checkout with no documentation
in offline situations. Also if you have an old checkout of the code
the URL may lead nowhere at all. With the in-repository model, if
you have a checkout of the repository you always have the relevant
documentation right there.</li>
<li><p>Documentation versions are kept synchronized with code versions.</p>

<ul>
<li><p>A feature branch that changes behavior can also update the
documentation. The behavior changes and documentation changes
can be merged atomically.</p></li>
<li><p>If you have an old checkout or an archive tarball of the code,
you also have the version of the documentation that applies to
that exact version.</p></li>
</ul>
</li>
<li><p>In-repository documentation sources can be edited with external
editors, rather than browser text windows. (This is also possible
with some alternative ways of managing documentation, but not
currently in Allura&rsquo;s wiki tool)</p></li>
</ul>


<h1>In-Repository Documentation with SourceForge&rsquo;s Allura Platform</h1>

<p>While there are a number of tools for publishing a git repository of
Markdown files as a web site, to my knowledge they are intended for
use with a dedicated repository, and not with a repository that
primarily holds something else (code) and has the documentation
sprinkled throughout as markdown files. It might be possible to use
existing tools to support this use-case though, and in particular I&rsquo;ve
managed to use SourceForge&rsquo;s
<a href="https://sourceforge.net/p/allura/">Allura platform</a>&rsquo;s git-repository
web-view-tool for this purpose.</p>

<h2>In-repository documentation in the XMHF project</h2>

<p>The documentation in the <a href="http://xmhf.org">XMHF</a> is in markdown files
in the code repository itself. Documentation is placed in the
file-system near the relevant component, with a top-level README.md
for the whole repository and for each component.</p>

<pre><code>├── COPYING.md
├── README.md
├── libbaremetal/
│   └── README.md
├── lockdown/
│   └── README.md
├── tee-cred/
│   └── README.md
├── tee-sdk/
│   └── README.md
├── trustvisor/
│   ├── doc/
│   │   ├── building-trustvisor.md
│   │   ├── installing-trustvisor.md
│   │   └── nv-storage.md
│   └── README.md
└── xmhf/
    ├── doc/
    │   ├── amt-serial-over-lan.md
    │   ├── building-xmhf.md
    │   ├── configuring-grub.md
    │   ├── custom-linux-kernels.md
    │   ├── debugging-xmhf.md
    │   ├── hardware-requirements.md
    │   └── installing-xmhf.md
    └── README.md
</code></pre>

<p>The documentation is viewable in html format through SourceForge&rsquo;s web
view of the
<a href="https://sourceforge.net/p/xmhf/xmhf/">xmhf repository</a>. The html
conversion is done transparently by SourceForge&rsquo;s Allura platform.</p>

<h1>Suggested improvements</h1>

<p>The usability of this technique could be improved a lot with some
small changes to the Allura platform.</p>

<h2>Shortcut syntax for relative links</h2>

<p>The vanilla Markdown syntax for title-less links is:</p>

<pre><code>[Text](URL)
</code></pre>

<p>Within the repository, linking to other files within the repository is
largely redundant. It would be nice to support the abbreviated</p>

<pre><code>[path/to/header.h] is a header file specifying...
</code></pre>

<p>as a shortcut for:</p>

<pre><code>[path/to/header.h](path/to/header.h) is a header file specifying...
</code></pre>

<p>I&rsquo;ve filed
<a href="https://sourceforge.net/p/allura/tickets/4472/">ticket #4472</a>
requesting that extension.</p>

<p>It would be even nicer if the platform indexed the locations of other
markdown files within the repository, allowing for a similar syntax as
&ldquo;artifact links&rdquo; in the wiki. i.e., it would be nice to allow:</p>

<pre><code>[Installing XMHF]
</code></pre>

<p>as a shortcut for:</p>

<pre><code>[Installing XMHF](xmhf/doc/installing-xmhf.md)
</code></pre>

<h2>Support for linking to most recent version of a file</h2>

<p>There is currently no permanent link that always points to the most
recent version of a file in a repository. For example, suppose I want
to a link to <code>installing-xmhf.md</code>. I can link to the current
most-recent version of it as follows:
<a href="https://sourceforge.net/p/xmhf/xmhf/ci/515d200b1914731871ee312a0bd6e8b9fc412100/tree/xmhf/doc/installing-xmhf.md">https://sourceforge.net/p/xmhf/xmhf/ci/515d200b1914731871ee312a0bd6e8b9fc412100/tree/xmhf/doc/installing-xmhf.md</a>. However,
after that document is updated, the link will still point to the exact
same (now deprecated) version of the file.</p>

<p>It would be better if I could link to the most recent with something
like:
<a href="https://sourceforge.net/p/xmhf/xmhf/current/tree/xmhf/doc/installing-xmhf.md">https://sourceforge.net/p/xmhf/xmhf/current/tree/xmhf/doc/installing-xmhf.md</a></p>

<p><a href="https://sourceforge.net/p/allura/tickets/4130/">Ticket 4130</a> requests this feature.</p>

<h2>Support for Markdown extensions</h2>

<p>The Allura platform extends Markdown to support things like tables and
code highlighting&hellip; except in the repository viewer. It currently
uses a different Markdown processor there that only recognizes vanilla
Markdown. <a href="https://sourceforge.net/p/allura/tickets/4474/">Ticket 4474</a>
requests unifying the markdown parsers for consistency.</p>

<p>It would be even nicer if Allura incorporated some of
<a href="http://johnmacfarlane.net/pandoc/README.html#pandocs-markdown">pandoc&rsquo;s markdown extensions</a>,
such as definition lists, multi-line tables, footnotes, citations, and
internal links.</p>

<h1>Other Tools and Platforms</h1>

<h2>Gitit</h2>

<p>I briefly experimented with <a href="http://gitit.net/">Gitit</a>. By default it
looks in a special sub-directory for markdown files, but it can be
configured to use the root directory instead by modifying the
<code>repository-path</code> variable. Unfortunately it mandates that all pages
end with the suffix <code>.page</code>, rather than recognizing other suffixes
like <code>.md</code>. I couldn&rsquo;t find a way to configure this, though presumably
it would only require a trivial change to the code.</p>

<h2>GitHub</h2>

<p><a href="http://github.com">GitHub</a>&rsquo;s repository viewer also renders markdown
files. Unfortunately, it appears that creating a relative link from
the root README to other files in the repository is <strong><em>impossible</em></strong>,
and <a href="https://github.com/github/markup/issues/84">not likely to be
added</a>.</p>

<p>Another possibility I haven&rsquo;t looked into is to use <a href="http://pages.github.com/">GitHub
Pages</a>. That feature publishes Markdown
files from a branch named <code>gh-pages</code>, using
<a href="https://github.com/mojombo/jekyll/">jekyll</a>. My impression is that
the intended usage is for the <code>gh-pages</code> branch to diverge from code
branches at the first commit, and not contain the code
itself. However, I don&rsquo;t think there&rsquo;s anything to stop one from
keeping <code>gh-pages</code> synchronized with master; i.e., having the markdown
files mixed with the code.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/07/06/dance-ave/">Dance Ave</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/04/in-repository-documentation/">In-Repository Documentation</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/sporksmith">@sporksmith</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'sporksmith',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>




<section>
<h1>About</h1>
I&#8217;m a computer engineer and occasional operatic bass.
I can be reached at <a href="mailto:jim@jimnewsome.net">jim@jimnewsome.net</a>. More <a href="/about">about me&#8230;</a>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Jim Newsome -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  











</body>
</html>
